-- SUPER FINAL SCRIPT SECRET FISH TESTER (FULL 38 SECRET FISH LIST - LENGKAP SESUAI REQUEST)

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")

local Event = ReplicatedStorage:WaitForChild("FishingSystem"):WaitForChild("FishGiver")

-- LIST SECRET FISH LENGKAP (38 IKAN BARU - SEMUA DIGANTI!)
local secretFishes = {
    "Zombie Shark",
    "Monster Shark",
    "Queen Crab",
    "Ancient Relic Crocodile",
    "Ancient Whale",
    "Kraken",
    "Sotong",
    "Sapu Sapu Goib",
    "Shark Bone",
    "King Crab",
    "Naga",
    "El Maja green",
    "El Maja white",
    "Mega Hunt",
    "Jungle Crocodile",
    "KingJally Strong",
    "Lochness Monster",
    "Worm Fish",
    "Ghost Worm Fish",
    "Ancient Lochness Monster",
    "Megalodon Christmas",
    "Kelwatar Yuzuy",
    "Megalodon X1x1x",
    "Paus Corda",
    "Hammer Shark",
    "Jellyfish core",
    "Voyage",
    "Amber",
    "Cindera Fish",
    "Dolphin Wiliw",
    "Dolphin Wheal",
    "King Monster",
    "Ciyup Carber",
    "Whale Shark",
    "Megalodon Core",
    "El Maja",
    "El Maja Pink",
    "Kuzjuy Shark"
}

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = Player:WaitForChild("PlayerGui")

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 400, 0, 500)  -- Lebar & tinggi ditambah biar muat 38 fish
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 20, 20)
MainFrame.Active = true
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 40)
TitleBar.BackgroundColor3 = Color3.fromRGB(60, 30, 30)
TitleBar.Parent = MainFrame
Instance.new("UICorner", TitleBar).CornerRadius = UDim.new(0, 12)

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, -80, 1, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "SECRET FISH  (38)"
TitleLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
TitleLabel.TextScaled = true
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.Parent = TitleBar

-- Minimize & Close
local MinimizeBtn = Instance.new("TextButton")
MinimizeBtn.Size = UDim2.new(0, 35, 0, 35)
MinimizeBtn.Position = UDim2.new(1, -75, 0, 3)
MinimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 0)
MinimizeBtn.Text = "-"
MinimizeBtn.TextScaled = true
MinimizeBtn.Parent = TitleBar
Instance.new("UICorner", MinimizeBtn).CornerRadius = UDim.new(0, 8)

local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 35, 0, 35)
CloseBtn.Position = UDim2.new(1, -35, 0, 3)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
CloseBtn.Text = "X"
CloseBtn.TextScaled = true
CloseBtn.Parent = TitleBar
Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(0, 8)

-- Content Scroll
local ContentScroll = Instance.new("ScrollingFrame")
ContentScroll.Size = UDim2.new(1, -10, 1, -50)
ContentScroll.Position = UDim2.new(0, 5, 0, 45)
ContentScroll.BackgroundTransparency = 1
ContentScroll.ScrollBarThickness = 8
ContentScroll.CanvasSize = UDim2.new(0, 0, 0, 900)  -- Tinggi canvas besar biar muat semua
ContentScroll.Parent = MainFrame

-- Minimize logic
local minimized = false
MinimizeBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    ContentScroll.Visible = not minimized
    MainFrame.Size = minimized and UDim2.new(0, 400, 0, 40) or UDim2.new(0, 400, 0, 500)
    MinimizeBtn.Text = minimized and "+" or "-"
end)

CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Draggable
local dragging = false
local dragStart, startPos
TitleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
    end
end)
TitleBar.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

-- ELEMENTS
local yPos = 10

local PilihButton = Instance.new("TextButton")
PilihButton.Size = UDim2.new(1, -20, 0, 50)
PilihButton.Position = UDim2.new(0, 10, 0, yPos)
PilihButton.BackgroundColor3 = Color3.fromRGB(60, 40, 40)
PilihButton.Text = "PILIH SECRET FISH ▼"
PilihButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PilihButton.TextScaled = true
PilihButton.Font = Enum.Font.GothamBold
PilihButton.Parent = ContentScroll
Instance.new("UICorner", PilihButton).CornerRadius = UDim.new(0, 8)
yPos += 60

local DropdownFrame = Instance.new("Frame")
DropdownFrame.Size = UDim2.new(1, -20, 0, 300)  -- Lebih tinggi biar muat 38 fish
DropdownFrame.Position = UDim2.new(0, 10, 0, yPos)
DropdownFrame.BackgroundColor3 = Color3.fromRGB(60, 40, 40)
DropdownFrame.Visible = false
DropdownFrame.Parent = ContentScroll
Instance.new("UICorner", DropdownFrame).CornerRadius = UDim.new(0, 8)
yPos += 310

local InnerScroll = Instance.new("ScrollingFrame")
InnerScroll.Size = UDim2.new(1, -10, 1, -10)
InnerScroll.Position = UDim2.new(0, 5, 0, 5)
InnerScroll.BackgroundTransparency = 1
InnerScroll.ScrollBarThickness = 8
InnerScroll.Parent = DropdownFrame

local innerY = 0
local selectedFish = nil
for _, fish in ipairs(secretFishes) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -10, 0, 45)
    btn.Position = UDim2.new(0, 5, 0, innerY)
    btn.BackgroundColor3 = Color3.fromRGB(80, 60, 60)
    btn.Text = fish
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.TextScaled = true
    btn.Parent = InnerScroll
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
    
    btn.MouseButton1Click:Connect(function()
        selectedFish = fish
        SelectedLabel.Text = "Selected: " .. fish .. " (Secret, 400-650kg)"
        DropdownFrame.Visible = false
        PilihButton.Text = fish .. " ▼"
        ResultLabel.Text = "Siap tes " .. fish .. "!"
    end)
    
    innerY += 50
end
InnerScroll.CanvasSize = UDim2.new(0, 0, 0, innerY)

PilihButton.MouseButton1Click:Connect(function()
    DropdownFrame.Visible = not DropdownFrame.Visible
    if DropdownFrame.Visible then
        PilihButton.Text = "TUTUP LIST ▲"
    else
        PilihButton.Text = selectedFish and (selectedFish .. " ▼") or "PILIH SECRET FISH ▼"
    end
end)

local SelectedLabel = Instance.new("TextLabel")
SelectedLabel.Size = UDim2.new(1, -20, 0, 40)
SelectedLabel.Position = UDim2.new(0, 10, 0, yPos)
SelectedLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SelectedLabel.Text = "Selected: None"
SelectedLabel.TextScaled = true
SelectedLabel.Parent = ContentScroll
Instance.new("UICorner", SelectedLabel).CornerRadius = UDim.new(0, 8)
yPos += 50

local DelayBox = Instance.new("TextBox")
DelayBox.Size = UDim2.new(1, -20, 0, 40)
DelayBox.Position = UDim2.new(0, 10, 0, yPos)
DelayBox.BackgroundColor3 = Color3.fromRGB(60, 40, 40)
DelayBox.Text = "0.2"
DelayBox.PlaceholderText = "Delay spam (detik)"
DelayBox.TextScaled = true
DelayBox.Parent = ContentScroll
Instance.new("UICorner", DelayBox).CornerRadius = UDim.new(0, 8)
yPos += 50

local ResultLabel = Instance.new("TextLabel")
ResultLabel.Size = UDim2.new(1, -20, 0, 80)
ResultLabel.Position = UDim2.new(0, 10, 0, yPos)
ResultLabel.BackgroundTransparency = 1
ResultLabel.Text = "Result: Pilih ikan dari list untuk mulai tes!"
ResultLabel.TextWrapped = true
ResultLabel.TextScaled = true
ResultLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
ResultLabel.Parent = ContentScroll
yPos += 90

local ButtonTes = Instance.new("TextButton")
ButtonTes.Size = UDim2.new(0.48, -10, 0, 50)
ButtonTes.Position = UDim2.new(0, 10, 0, yPos)
ButtonTes.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
ButtonTes.Text = "TES SEKALI"
ButtonTes.TextScaled = true
ButtonTes.Parent = ContentScroll
Instance.new("UICorner", ButtonTes).CornerRadius = UDim.new(0, 8)

local ButtonSpam = Instance.new("TextButton")
ButtonSpam.Size = UDim2.new(0.48, -10, 0, 50)
ButtonSpam.Position = UDim2.new(0.52, 10, 0, yPos)
ButtonSpam.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
ButtonSpam.Text = "START SPAM"
ButtonSpam.TextScaled = true
ButtonSpam.Parent = ContentScroll
Instance.new("UICorner", ButtonSpam).CornerRadius = UDim.new(0, 8)

-- Logic FireServer
local spamming = false
local spamCount = 0

local function getPosition()
    local char = Player.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        return char.HumanoidRootPart.Position
    end
    return Vector3.new(0, 100, 0)
end

local function giveFish()
    if not selectedFish then
        ResultLabel.Text = "Pilih ikan dulu dari list!"
        return
    end
    local weight = math.random(400, 650)
    local pos = getPosition()
    
    pcall(function()
        Event:FireServer(true, {
            hookPosition = pos,
            name = selectedFish,
            rarity = "Secret",
            weight = weight
        })
    end)
    
    spamCount += 1
    ResultLabel.Text = "Fired #" .. spamCount .. ":\n" .. selectedFish .. " (" .. weight .. "kg Secret)\nPos: " .. string.format("%.1f, %.1f, %.1f", pos.X, pos.Y, pos.Z)
end

ButtonTes.MouseButton1Click:Connect(giveFish)

spawn(function()
    while task.wait(0.1) do
        if spamming then
            giveFish()
            task.wait(tonumber(DelayBox.Text) or 0.2)
        end
    end
end)

ButtonSpam.MouseButton1Click:Connect(function()
    if not selectedFish then
        ResultLabel.Text = "Pilih ikan dulu!"
        return
    end
    spamming = not spamming
    ButtonSpam.Text = spamming and "STOP SPAM" or "START SPAM"
    ButtonSpam.BackgroundColor3 = spamming and Color3.fromRGB(100, 0, 0) or Color3.fromRGB(200, 0, 0)
end)

print("SCRIPT LENGKAP LOADED! 38 secret fish siap di-tes. Pilih dari dropdown → tes/spaTESTER
